{% extends "partial/body.html" %}
{% load static %}
{% load month_tags %}
{% load i18n %}
{% block contenido %}
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>


    
   
{% if user.is_authenticated %}
<!--- Main content -->
<section class="content">
  <div class="container-fluid">
    <div class="card-body">
      <h4 class="">Información General</h4>
    </div>
    <!-- Small boxes (Stat box) -->
    <div class="row">
      <div class="col-lg-3 col-6">
        <!-- small box -->
        <div class="small-box bg-gradient-info">
          <!--         <div class="small-box bg-gradient-info" style="background-color: rgba(3, 168, 201, 0.992);">
 -->
          <div class="inner">
            <h3>{{registro_total_protocolo_metodos}}</h3>

            <p>Protocolos de Métodos</p>
          </div>
          <div class="icon">
            <i class="ion ion-bag"></i>
          </div>
          <a href="{% url 'protocolo_metodos' %}" class="small-box-footer">Mas información <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
         <!--         <div class="small-box text-white" style="background-color: rgba(4, 201, 168, 0.992);">
 -->
        <div class="small-box bg-gradient-success text-white">
          <div class="inner">
            <h3>{{registro_total_protocolo_proceso}}</h3>
            <p>Protocolos de Proceso</p>
          </div>
          <div class="icon">
            <i class="ion ion-stats-bars"></i>
          </div>
          <a href="{% url 'protocolo_proceso' %}" class="small-box-footer">Mas información  <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
         <!--         <div class="small-box text-white" style="background-color: rgba(123, 2, 153, 0.697);">
 -->
        <div class="small-box bg-gradient-warning text-white" >
          <div class="inner">
            <h3>0<sup style="font-size: 20px"></sup></h3>

            <p>Desarrollos</p>
          </div>
          <div class="icon">
            <i class="ion ion-person-add"></i>
          </div>
          <a href="#" class="small-box-footer">Mas información  <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
      <div class="col-lg-3 col-6">
        <!-- small box -->
         <!--        <div class="small-box text-white" style="background-color: rgba(248, 69, 69, 0.94);">
 -->
        <div class="small-box bg-gradient-danger text-white">
          <div class="inner">
            <h3>0  
            </h3>

            <p>Estabilidades</p>
          </div>
          <div class="icon">
            <i class="ion ion-pie-graph"></i>
          </div>
          <a href="#" class="small-box-footer">Mas información  <i class="fas fa-arrow-circle-right"></i></a>
        </div>
      </div>
      <!-- ./col -->
    </div>
    <!-- /.row -->
    <!-- Main row -->
    <div class="row">
      <!-- Left col -->
      <section class="col-lg-6 connectedSortable">
        <!-- Custom tabs (Charts with tabs)-->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-chart-pie mr-1"></i>
              Protocolos de Métodos Finalizados
            </h3>
       
          </div><!-- /.card-header -->
          <div class="card-body" id="container">
           
          </div><!-- /.card-body -->
        </div>

      </section>
      <!-- /.Left col -->
      <!-- right col (We are only adding the ID to make the widgets sortable)-->
      <section class="col-lg-6 connectedSortable">

        <!-- Map card -->
      
        <!-- /.card -->

        <!-- solid sales graph -->
        <div class="card bg-gradient-white">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-chart-pie mr-1"></i>
              Estado de Protocolos de Métodos
            </h3>

          </div>
          <div class="card-body" id="containers">
          </div>
          <!-- /.card-body -->

          <!-- /.card-footer -->
        </div>
        <!-- /.card -->

        <!-- Calendar -->
   
        <!-- /.card -->
      </section>
      <!-- right col -->
    </div>
    <!-- /.row (main row) -->
    <div class="row">
      <!-- Left col -->
      <section class="col-lg-6 connectedSortable">
        <!-- Custom tabs (Charts with tabs)-->
        <div class="card">
          <div class="card-header" >
            <h3 class="card-title">
              <i class="fas fa-chart-pie mr-1"></i>
              Protocolos de Proceso Finalizados
            </h3>
       
          </div><!-- /.card-header -->
          <div class="card-body" id="containerPr">
           
          </div><!-- /.card-body -->
        </div>

      </section>
      <!-- /.Left col -->
      <!-- right col (We are only adding the ID to make the widgets sortable)-->
      <section class="col-lg-6 connectedSortable">

        <!-- Map card -->
      
        <!-- /.card -->

        <!-- solid sales graph -->
        <div class="card bg-gradient-white">
          <div class="card-header">
            <h3 class="card-title">
              <i class="fas fa-chart-pie mr-1"></i>
              Estado de Protocolos de Proceso
            </h3>

          </div>
          <div class="card-body" id="containersPr">
          </div>
          <!-- /.card-body -->

          <!-- /.card-footer -->
        </div>
        <!-- /.card -->

        <!-- Calendar -->
   
        <!-- /.card -->
      </section>
      <!-- right col -->
    </div>
  </div><!-- /.container-fluid -->
</section>
<!-- /.content -->

<!--
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
-->
{% block javascripts %}
<!--Graficos-->
<script type="">
    Highcharts.chart('containers', {{ chart2|safe }}
      
    );
  </script>
  <script type="">
    Highcharts.chart('containersPr', {{ chart3|safe }});
  </script>


<script type="">
Highcharts.chart('container', {
  credits: {
    enabled: false
},
      chart: {
          type: 'column'
      },
      title: {
          text: ''
      },
      plotOptions: {
		column: {
			pointPadding: 0.2,
			borderWidth: 6
   
		}
	},
      xAxis: {
          categories: [

          
            {% for entry in dataset %} "{{ entry.fecha_final__month | month_name }}" {% if not forloop.last %}, {% endif %}{% endfor %}
          ]
      },
      series: [{
          name: 'Finalizado',
          data: [
            {% for entry in dataset %}{{ entry.Finalizado }}{% if not forloop.last %}, {% endif %}{% endfor %}
            
          ],
          //colorByPoint: 'true',
          //showInLegen:"false",
         
          
          //backgroundColor: 'red'
          color: "#1088b1",
          borderColor: "#d7e2e8   ",
      }, 
    ]
      
  });
</script>

<script type="">
  Highcharts.chart('containerPr', {
    credits: {
    enabled: false
},
    
        chart: {
            type: 'column'
        },
        plotOptions: {
		column: {
			pointPadding: 0.2,
			borderWidth: 6
		}
	},
        title: {
            text: ''
        },
        xAxis: {
            categories: [
  
            
              {% for entry in datasetPr %} "{{ entry.fecha_final__month | month_name }}" {% if not forloop.last %}, {% endif %}{% endfor %}
            ]
        },
        series: [{
            name: 'Finalizado',
            data: [
              {% for entry in datasetPr %}{{ entry.Finalizado }}{% if not forloop.last %}, {% endif %}{% endfor %}
            ],
             //colorByPoint: 'true',
          showInLegen:"false",
          color: "#1088b1",
          borderColor: "#d7e2e8   ",
        }, 
      ]
        
    });
  </script>
  {% endblock %}
  {% else %}
<!-- Inicia sesión -->
<div class="container1">
  <h1 class="display-6"><strong>Su sesión ha terminado!</strong></h1>
  <div class="astronaut">
    <div class="astronaut__backpack"></div>
    <div class="astronaut__body"></div>
    <div class="astronaut__body__chest"></div>
    <div class="astronaut__arm-left1"></div>
    <div class="astronaut__arm-left2"></div>
    <div class="astronaut__arm-right1"></div>
    <div class="astronaut__arm-right2"></div>
    <div class="astronaut__arm-thumb-left"></div>
    <div class="astronaut__arm-thumb-right"></div>
    <div class="astronaut__leg-left"></div>
    <div class="astronaut__leg-right"></div>
    <div class="astronaut__foot-left"></div>
    <div class="astronaut__foot-right"></div>
    <div class="astronaut__wrist-left"></div>
    <div class="astronaut__wrist-right"></div>
    
    <div class="astronaut__cord">
      <canvas id="cord" height="500px" width="500px"></canvas>
    </div>
    
    <div class="astronaut__head">
      <canvas id="visor" width="60px" height="60px"></canvas>
      <div class="astronaut__head-visor-flare1"></div>
      <div class="astronaut__head-visor-flare2"></div>
    </div>
  </div>
 
  
 </div>
 <!-- Inicia sesion-->
  {% endif %}
  

{% endblock contenido %}