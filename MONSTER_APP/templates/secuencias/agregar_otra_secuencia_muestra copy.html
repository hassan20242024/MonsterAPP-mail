{% extends "partial/body.html" %}




{% load crispy_forms_tags %}
{% load crispy_forms_filters %}
{% block contenido %}
{% load bootstrap5 %}
{% load static %}


<!-- Margen Inicio -->

<script src="https://unpkg.com/gijgo@1.9.14/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.14/css/gijgo.min.css" rel="stylesheet" type="text/css" />

 <!-- Contact 1 - Bootstrap Brain Component -->

<br><br> 

  <div class="container">
    <div class="row justify-content-lg-center">
      <div class="col-12 col-lg-11">
        <div class="shadow-sm overflow-hidden rounded " style="background-color: #1b3d70c2; ">
          <h5 class="text-white text-center  "><br>Agregar Nueva Muestra</h5>
     </div>

        <div class="bg-white border rounded shadow-sm overflow-hidden"><br>

          <form action="" id="myModelForm" method="POST">    {% csrf_token %}
          
            <div class="row gy-4 gy-xl-4 p-4 p-xl-4">
              <div class="col-12">
                <div class="form-group ">
                    <div class="py-2">
                        <label for="">Muestras/Placebos/MP...</label>

                    </div>
                    <div class="py-1">
                        <div class="card form-control ">
                            <select   name="muestras" class=" duplicarMuestras "  title="" required="" id="id_muestras">
                                <option>Seleccione . . . </option>
                                {% for item1 in muestras.all %}
                                <option value="{{item1.id}}">{{item1.nombre_muestra}} {{item1.lote_muestra}} {{item1.etapa}} {{item1.codigo_muestra_producto}}</option>
                              {% endfor %}
                            </select>
                           </div>
        

                    </div>
                    
                </div>
              </div>
            <div style="display: none;">
                <!--FECHA INVALIDAR PARA EVITAR REGISTROS DUPLICADOS--> 
                <input value="0001-01-01" type="text" name="fecha_invalidar" class="numberinput form-control gj-textbox-md " id="fecha_invalidar" width="" data-datepicker="true"  > 
                <!--FECHA INVALIDAR PARA EVITAR REGISTROS DUPLICADOS--> 
       

              {{ form.nombre|as_crispy_field  }}
              {{ form.fecha_Inicio|as_crispy_field  }}
              {{ form.protocolo_proceso|as_crispy_field  }}
              {{ form.sistema|as_crispy_field  }}
              {{ form.observaciones|as_crispy_field  }}
            </div>
             
<!------>

            <div class="d-grid gap-2 d-md-flex justify-content-md-center py-1">
                <button class="btn btn-primary " type="submit" style="background-color: #1b3d70c2;">Agregar</button>
                <a href="{% url 'crear_secuencias_en_curso' %}" onclick='salir(event)' type="submit" class="btn btn-dark " style="background-color: #7d848ec2;" >Cancelar</a>
              </div>

          </form>

        </div><br>
      </div>
    </div>
  </div>

<!-- Margen Final -->

<!-- Validación de campos -->
 
<script>
  function confirmar(event) { 
    
    event.preventDefault();
    Swal.fire({
  title: "Está seguro?",
  text: "Por favor, confirme el nuevo registro!",
  icon: "question",
  showCancelButton: true,
  confirmButtonColor: "#3085d6",
  cancelButtonColor: "#d33",
  confirmButtonText: "Confirmar!"
    }).then((result) => {
        if (result.isConfirmed) {
          document.getElementById('myModelForm').submit();
        }
    })
}
</script>
                                <!--SCRIPTS INICIO PARA SELECT2-->
                                <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
                                <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
                                <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
                                 <script>
                                 $('.duplicarMuestras').css('width', '100%').select2({
                                 theme: "classic",
                                 //dropdownParent:$("#duplicar_secuencias_muestras_{{ item.pk}}"),
                                 });
                                 </script>
                                           <!--SCRIPTS FINAL PARA SELECT2-->
            
  <!-- validacion de campos-->


{% endblock contenido %}